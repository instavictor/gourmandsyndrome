"use strict";(self.webpackChunkv4=self.webpackChunkv4||[]).push([["365"],{352:function(e,n,t){var r,a,i=t("150"),s=t("395"),c=t("893"),l=t("294"),o=t("745"),u=t("409"),d=t("950"),f=t("827");function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}(r=a||(a={})).nyc="New York City",r.bos="Boston",r.anc="Anchorage",r.bra="Brazil",r.ca="Canada",r.chi="Chicago",r.dc="Washington DC",r.haw="Hawaii",r.las="Las Vegas",r.lax="Los Angeles",r.mco="Orlando",r.sea="Seattle";var v={lic:"Long Island City",les:"Lower East Side",ues:"Upper East Side",uws:"Upper West Side"},p=Object.fromEntries(Object.entries(v).map(function(e){var n,t,r=(t=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,n){var t,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],s=!0,c=!1;try{for(a=a.call(e);!(s=(t=a.next()).done)&&(i.push(t.value),!n||i.length!==n);s=!0);}catch(e){c=!0,r=e}finally{try{!s&&null!=a.return&&a.return()}finally{if(c)throw r}}return i}}(n,2)||function(e,n){if(e){if("string"==typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}}(n,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0];return[r[1],a]})),j={cuisineBreakdown:{},restaurantBreakdown:{},localeMap:{},cuisineMap:{},restaurantCount:{}},m=function(e){var n;return null===(n=e.index)||void 0===n||n.forEach(function(e){var n,t=e.meta.locale,r=e.meta.neighborhoods;j.restaurantCount[t]?j.restaurantCount[t]++:j.restaurantCount[t]=1,j.localeMap[t]=!0;var a=j.restaurantBreakdown,i=a[t]||{};r.forEach(function(n){var t={name:e.title,link:e.permalink},r=v[n.toLowerCase()]||n;i[r]?i[r].push(t):i[r]=[t]}),a[t]=i,null===(n=e.meta.cuisines)||void 0===n||n.forEach(function(e){j.cuisineMap[e]=!0;var n=j.cuisineBreakdown[e]||{};n.totalCount?n.totalCount=n.totalCount+1:n.totalCount=1,!n.locales&&(n.locales={}),n.locales[t]?n.locales[t]++:n.locales[t]=1,j.cuisineBreakdown[e]=n})}),j},x=function(e){var n=j;if(e.localeFilters||e.cuisineFilters){var t=JSON.parse(JSON.stringify(j)),r=e.localeFilters;r&&Object.keys(r).forEach(function(e){if(!r[e]){var n=t.cuisineBreakdown;Object.keys(n).forEach(function(t){var r=n[t].locales;(null==r?void 0:r[e])&&(delete r[e],Object.values(r).length<=0&&delete n[t])}),delete t.restaurantBreakdown[e]}});var a=e.cuisineFilters;a&&Object.keys(a).forEach(function(e){!a[e]&&delete t.cuisineBreakdown[e]}),n=t}return n},b=function(e,n){return e[0]===n[0]?0:"nyc"===e[0]?-1:"nyc"===n[0]?1:e[0]<n[0]?-1:e[0]>n[0]?1:0},y=function(e,n){var t,r;return("string"==typeof t?(t=e,r=n):(t=e.name,r=n.name),t===r)?0:"nyc"===t?-1:"nyc"===r?1:t<r?-1:t>r?1:0},k=(0,l.createContext)({data:{},localeFilters:{},updateLocaleFilters:function(){},cuisineFilters:{},updateCuisineFilters:function(){}}),C=function(e){var n,t,r,a,i=(0,f.c)(13),s=e.response,o=e.children,h=(0,d._)((0,l.useState)(s),2),v=h[0],p=h[1],j=(0,d._)((0,l.useState)(s.localeMap),2),m=j[0],b=j[1];i[0]!==m?(n=function(e){var n=(0,u._)({},m,e);b(n),p(x({localeFilters:n}))},i[0]=m,i[1]=n):n=i[1];var y=n,C=(0,d._)((0,l.useState)(s.cuisineMap),2),F=C[0],w=C[1];i[2]!==F?(t=function(e){var n=(0,u._)({},F,e);w(n),p(x({cuisineFilters:n}))},i[2]=F,i[3]=t):t=i[3];var g=t;i[4]!==v||i[5]!==m||i[6]!==y||i[7]!==F||i[8]!==g?(r={data:v,localeFilters:m,updateLocaleFilters:y,cuisineFilters:F,updateCuisineFilters:g},i[4]=v,i[5]=m,i[6]=y,i[7]=F,i[8]=g,i[9]=r):r=i[9];var B=r;return i[10]!==B||i[11]!==o?(a=(0,c.jsx)(k.Provider,{value:B,children:o}),i[10]=B,i[11]=o,i[12]=a):a=i[12],a},F=function(){return(0,l.useContext)(k)},w=t("412"),g=t("932"),B=function(e){var n,t,r=(0,f.c)(8),i=e.locale,s=(0,l.useRef)(null),o=F(),u=o.localeFilters[i[0]];r[0]!==o||r[1]!==u?(n=function(){var e=s.current;if(null==e?void 0:e.textContent){var n=e.getAttribute("data-locale");n&&o.updateLocaleFilters((0,w._)({},n,!u))}},r[0]=o,r[1]=u,r[2]=n):n=r[2];var d=n,h=i[0],v=g.z.nativeEnum(a).parse(a[h])?a[h]:"",p=i[0],j=u?"active":"";return r[3]!==p||r[4]!==j||r[5]!==d||r[6]!==v?(t=(0,c.jsx)("li",{children:(0,c.jsx)("button",{ref:s,"data-locale":p,className:j,onClick:d,children:v})}),r[3]=p,r[4]=j,r[5]=d,r[6]=v,r[7]=t):t=r[7],t},N=function(){var e,n,t,r,a,i,s,l,o,u=(0,f.c)(18),d=F();u[0]!==d?(e=function(){var e=d.localeFilters;Object.keys(e).forEach(function(n){e[n]=!0}),d.updateLocaleFilters(e)},u[0]=d,u[1]=e):e=u[1];var h=e;u[2]!==d?(n=function(){var e=d.localeFilters;Object.keys(e).forEach(function(n){e[n]=!1}),d.updateLocaleFilters(e)},u[2]=d,u[3]=n):n=u[3];var v=n,p=d.localeFilters;u[4]!==p?(t=Object.entries(p).sort(b).map(S),u[4]=p,u[5]=t):t=u[5];var j=t;return u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)("h3",{children:"Locales"}),a=(0,c.jsx)("span",{children:"Select: "}),u[6]=r,u[7]=a):(r=u[6],a=u[7]),u[8]!==h?(i=(0,c.jsx)("button",{type:"button",onClick:h,children:"All"}),u[8]=h,u[9]=i):i=u[9],u[10]!==v?(s=(0,c.jsx)("button",{type:"button",onClick:v,children:"None"}),u[10]=v,u[11]=s):s=u[11],u[12]!==j?(l=(0,c.jsx)("ul",{className:"buttons",children:j}),u[12]=j,u[13]=l):l=u[13],u[14]!==i||u[15]!==s||u[16]!==l?(o=(0,c.jsxs)(c.Fragment,{children:[r,a,i,s,l]}),u[14]=i,u[15]=s,u[16]=l,u[17]=o):o=u[17],o};function S(e){return(0,c.jsx)(B,{locale:e},e[0])}N.displayName="Locale Filters";var O=function(e){var n,t,r,a=(0,f.c)(11),i=e.cuisine,s=(0,l.useRef)(null),o=F(),u=o.cuisineFilters[i[0]];a[0]!==o||a[1]!==u?(n=function(){var e=s.current;if(null==e?void 0:e.textContent){var n=e.getAttribute("data-cuisine");n&&o.updateCuisineFilters((0,w._)({},n,!u))}},a[0]=o,a[1]=u,a[2]=n):n=a[2];var d=n,h=i[0],v=i[0],p=u?"active":"",j=i[0];return a[3]!==v||a[4]!==p||a[5]!==d||a[6]!==j?(t=(0,c.jsx)("button",{ref:s,"data-cuisine":v,className:p,onClick:d,children:j}),a[3]=v,a[4]=p,a[5]=d,a[6]=j,a[7]=t):t=a[7],a[8]!==h||a[9]!==t?(r=(0,c.jsx)("li",{children:t},h),a[8]=h,a[9]=t,a[10]=r):r=a[10],r},E=function(){var e,n,t,r,a,i,s,l,o,u=(0,f.c)(18),d=F();u[0]!==d?(e=function(){var e=d.cuisineFilters;Object.keys(e).forEach(function(n){e[n]=!0}),d.updateCuisineFilters(e)},u[0]=d,u[1]=e):e=u[1];var h=e;u[2]!==d?(n=function(){var e=d.cuisineFilters;Object.keys(e).forEach(function(n){e[n]=!1}),d.updateCuisineFilters(e)},u[2]=d,u[3]=n):n=u[3];var v=n,p=d.cuisineFilters;u[4]!==p?(t=Object.entries(p).sort(b).map(_),u[4]=p,u[5]=t):t=u[5];var j=t;return u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)("h3",{children:"Cuisines"}),a=(0,c.jsx)("span",{children:"Select: "}),u[6]=r,u[7]=a):(r=u[6],a=u[7]),u[8]!==h?(i=(0,c.jsx)("button",{type:"button",onClick:h,children:"All"}),u[8]=h,u[9]=i):i=u[9],u[10]!==v?(s=(0,c.jsx)("button",{type:"button",onClick:v,children:"None"}),u[10]=v,u[11]=s):s=u[11],u[12]!==j?(l=(0,c.jsx)("ul",{className:"buttons",children:j}),u[12]=j,u[13]=l):l=u[13],u[14]!==i||u[15]!==s||u[16]!==l?(o=(0,c.jsxs)(c.Fragment,{children:[r,a,i,s,l]}),u[14]=i,u[15]=s,u[16]=l,u[17]=o):o=u[17],o};function _(e){return(0,c.jsx)(O,{cuisine:e},e[0])}E.displayName="Cuisine Filters";var L=function(e,n){var t=n.locales,r=void 0===t?{}:t,a=Object.keys(r).sort(y).map(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r[n],a=e.toLowerCase().replace(/ /g,"-");if(t)return(0,c.jsx)("li",{children:(0,c.jsxs)("a",{"data-locale":n,href:"/".concat(n,"/cuisine/").concat(a),children:[n.toUpperCase()," (",t,")"]})},n)});return(0,c.jsx)("ul",{children:a})},A=function(){var e,n,t,r,a,i,s,l,o,u,d,h=(0,f.c)(25),v=F(),j=v.data;h[0]!==j.cuisineBreakdown||h[1]!==v.cuisineFilters?(h[3]!==v.cuisineFilters?(n=function(e){return v.cuisineFilters[e]},h[3]=v.cuisineFilters,h[4]=n):n=h[4],h[5]!==j.cuisineBreakdown?(t=function(e){var n=j.cuisineBreakdown[e];return(0,c.jsxs)("li",{className:"first-level","data-cuisine":e,children:[(0,c.jsxs)("span",{children:[e," (",n.totalCount,")"]}),(0,c.jsx)("div",{className:"second-level",children:L(e,n)})]},e)},h[5]=j.cuisineBreakdown,h[6]=t):t=h[6],e=Object.keys(j.cuisineBreakdown).filter(n).sort().map(t),h[0]=j.cuisineBreakdown,h[1]=v.cuisineFilters,h[2]=e):e=h[2];var m=e;h[7]!==j.restaurantBreakdown||h[8]!==j.restaurantCount||h[9]!==v.localeFilters?(h[11]!==v.localeFilters?(a=function(e){return v.localeFilters[e]},h[11]=v.localeFilters,h[12]=a):a=h[12],h[13]!==j.restaurantBreakdown||h[14]!==j.restaurantCount?(i=function(e){var n=j.restaurantBreakdown[e],t=Object.keys(n).sort().map(function(t){var r=n[t].length,a=n[t].sort(y).map(function(e){return(0,c.jsx)("li",{className:"third-level",children:(0,c.jsx)("a",{href:e.link,children:e.name})},"".concat(t,"-").concat(e.name))}),i=(p[t]||t).replace(/ /g,"-").replace(/'/g,"").toLowerCase();return console.log(i),(0,c.jsxs)("li",{className:"neighborhood-level",children:[(0,c.jsx)("a",{href:"/".concat(e,"/neighborhood/").concat(i),children:t.toUpperCase()})," (",r,")",(0,c.jsx)("ul",{children:a})]},"".concat(e,"-").concat(i))});return(0,c.jsxs)("li",{className:"first-level","data-locale":e,children:[(0,c.jsx)("a",{href:"/locale/".concat(e),children:e.toUpperCase()})," (",j.restaurantCount[e],")",(0,c.jsx)("ul",{children:t})]},e)},h[13]=j.restaurantBreakdown,h[14]=j.restaurantCount,h[15]=i):i=h[15],r=Object.keys(j.restaurantBreakdown).filter(a).map(i),h[7]=j.restaurantBreakdown,h[8]=j.restaurantCount,h[9]=v.localeFilters,h[10]=r):r=h[10];var x=r;return h[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)("div",{className:"title",children:"Cuisine Breakdown"}),h[16]=s):s=h[16],h[17]!==m?(l=(0,c.jsxs)("section",{id:"cuisine-breakdown",children:[s,(0,c.jsx)("div",{className:"synopsis",children:(0,c.jsx)("ul",{children:m})})]}),h[17]=m,h[18]=l):l=h[18],h[19]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)("div",{className:"title",children:"Restaurant Breakdown"}),h[19]=o):o=h[19],h[20]!==x?(u=(0,c.jsxs)("section",{id:"restaurant-breakdown",children:[o,(0,c.jsx)("div",{className:"synopsis",children:(0,c.jsx)("ul",{children:x})})]}),h[20]=x,h[21]=u):u=h[21],h[22]!==l||h[23]!==u?(d=(0,c.jsxs)(c.Fragment,{children:[l,u]}),h[22]=l,h[23]=u,h[24]=d):d=h[24],d};function M(){return(M=(0,i._)(function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:return[4,fetch("/index.json")];case 1:return[2,e.sent().json()]}})})).apply(this,arguments)}(function(){return M.apply(this,arguments)})().then(function(e){var n,t={},r={};null===(n=e.index)||void 0===n||n.forEach(function(e){t[e.meta.locale]=!0,e.meta.cuisines.forEach(function(e){r[e]=!0})});var a=document.querySelector("#content .stats");a?(0,o.createRoot)(a).render((0,c.jsx)(l.StrictMode,{children:(0,c.jsxs)(C,{response:m(e),children:[(0,c.jsxs)("div",{className:"filters",children:[(0,c.jsx)(N,{}),(0,c.jsx)(E,{})]}),(0,c.jsx)("div",{className:"results",children:(0,c.jsx)(A,{})})]})})):console.error("Could not render root because query selector failed")})}}]);
//# sourceMappingURL=365.gs.js.map