"use strict";(self.webpackChunkv4=self.webpackChunkv4||[]).push([["365"],{352:function(e,t,n){var r,a,i=n("150"),l=n("395"),c=n("893"),s=n("294"),o=n("745"),u=n("409"),d=n("950"),f=n("827");function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}(r=a||(a={})).nyc="New York City",r.bos="Boston",r.anc="Anchorage",r.bra="Brazil",r.ca="Canada",r.chi="Chicago",r.dc="Washington DC",r.haw="Hawaii",r.las="Las Vegas",r.lax="Los Angeles",r.mco="Orlando",r.sea="Seattle";var v={lic:"Long Island City",les:"Lower East Side",ues:"Upper East Side",uws:"Upper West Side"},p=Object.fromEntries(Object.entries(v).map(function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{!l&&null!=a.return&&a.return()}finally{if(c)throw r}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0];return[r[1],a]}));function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m={cuisineBreakdown:{},restaurantBreakdown:{},localeMap:{},cuisineMap:{},restaurantCount:{}},y=function(e){var t;return null===(t=e.index)||void 0===t||t.forEach(function(e){var t,n=e.meta.locale,r=e.meta.neighborhoods;m.restaurantCount[n]?m.restaurantCount[n]++:m.restaurantCount[n]=1,m.localeMap[n]=!0;var a=m.restaurantBreakdown,i=a[n]||{};r.forEach(function(t){var n={name:e.title,link:e.permalink,cuisines:e.meta.cuisines},r=v[t.toLowerCase()]||t;i[r]?i[r].push(n):i[r]=[n]}),a[n]=i,null===(t=e.meta.cuisines)||void 0===t||t.forEach(function(e){m.cuisineMap[e]=!0;var t=m.cuisineBreakdown[e]||{};t.totalCount?t.totalCount=t.totalCount+1:t.totalCount=1,!t.locales&&(t.locales={}),t.locales[n]?t.locales[n]++:t.locales[n]=1,m.cuisineBreakdown[e]=t})}),m},b=function(e){var t=m;if(e.localeFilters||e.cuisineFilters){var n=JSON.parse(JSON.stringify(m)),r=e.localeFilters;r&&(Object.keys(r).forEach(function(e){if(!r[e]){var t=n.cuisineBreakdown;Object.keys(t).forEach(function(n){var r=t[n].locales;(null==r?void 0:r[e])&&(delete r[e],Object.values(r).length<=0&&delete t[n])}),delete n.restaurantBreakdown[e]}}),t=n);var a=e.cuisineFilters;a&&(Object.entries(a).filter(function(e){var t,n;return!0===(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{!l&&null!=a.return&&a.return()}finally{if(c)throw r}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}}(t,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1]}).length>0?Object.keys(a).forEach(function(e){if(a[e]){var t=n.restaurantBreakdown;Object.keys(t).forEach(function(n){var r=t[n];Object.keys(r).forEach(function(t){var n=r[t].filter(function(t){return t.cuisines.includes(e)});r[t]=n})})}else delete n.cuisineBreakdown[e]}):(n.restaurantBreakdown={},n.cuisineBreakdown={}),t=n)}return t},x=function(e,t){return e[0]===t[0]?0:"nyc"===e[0]?-1:"nyc"===t[0]?1:e[0]<t[0]?-1:e[0]>t[0]?1:0},k=function(e,t){var n,r;return("string"==typeof n?(n=e,r=t):(n=e.name,r=t.name),n===r)?0:"nyc"===n?-1:"nyc"===r?1:n<r?-1:n>r?1:0},C=(0,s.createContext)({data:{},localeFilters:{},updateLocaleFilters:function(){},cuisineFilters:{},updateCuisineFilters:function(){}}),F=function(e){var t,n,r,a,i=(0,f.c)(13),l=e.response,o=e.children,h=(0,d._)((0,s.useState)(l),2),v=h[0],p=h[1],j=(0,d._)((0,s.useState)(l.localeMap),2),m=j[0],y=j[1];i[0]!==m?(t=function(e){var t=(0,u._)({},m,e);y(t),p(b({localeFilters:t}))},i[0]=m,i[1]=t):t=i[1];var x=t,k=(0,d._)((0,s.useState)(l.cuisineMap),2),F=k[0],w=k[1];i[2]!==F?(n=function(e){var t=(0,u._)({},F,e);w(t),p(b({cuisineFilters:t}))},i[2]=F,i[3]=n):n=i[3];var g=n;i[4]!==v||i[5]!==m||i[6]!==x||i[7]!==F||i[8]!==g?(r={data:v,localeFilters:m,updateLocaleFilters:x,cuisineFilters:F,updateCuisineFilters:g},i[4]=v,i[5]=m,i[6]=x,i[7]=F,i[8]=g,i[9]=r):r=i[9];var B=r;return i[10]!==B||i[11]!==o?(a=(0,c.jsx)(C.Provider,{value:B,children:o}),i[10]=B,i[11]=o,i[12]=a):a=i[12],a},w=function(){return(0,s.useContext)(C)},g=n("412"),B=n("932"),S=function(e){var t,n,r=(0,f.c)(8),i=e.locale,l=(0,s.useRef)(null),o=w(),u=o.localeFilters[i[0]];r[0]!==o||r[1]!==u?(t=function(){var e=l.current;if(null==e?void 0:e.textContent){var t=e.getAttribute("data-locale");t&&o.updateLocaleFilters((0,g._)({},t,!u))}},r[0]=o,r[1]=u,r[2]=t):t=r[2];var d=t,h=i[0],v=B.z.nativeEnum(a).parse(a[h])?a[h]:"",p=i[0],j=u?"active":"";return r[3]!==p||r[4]!==j||r[5]!==d||r[6]!==v?(n=(0,c.jsx)("li",{children:(0,c.jsx)("button",{ref:l,"data-locale":p,className:j,onClick:d,children:v})}),r[3]=p,r[4]=j,r[5]=d,r[6]=v,r[7]=n):n=r[7],n},O=function(){var e,t,n,r,a,i,l,s,o,u=(0,f.c)(18),d=w();u[0]!==d?(e=function(){var e=d.localeFilters;Object.keys(e).forEach(function(t){e[t]=!0}),d.updateLocaleFilters(e)},u[0]=d,u[1]=e):e=u[1];var h=e;u[2]!==d?(t=function(){var e=d.localeFilters;Object.keys(e).forEach(function(t){e[t]=!1}),d.updateLocaleFilters(e)},u[2]=d,u[3]=t):t=u[3];var v=t,p=d.localeFilters;u[4]!==p?(n=Object.entries(p).sort(x).map(N),u[4]=p,u[5]=n):n=u[5];var j=n;return u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)("h3",{children:"Locales"}),a=(0,c.jsx)("span",{children:"Select: "}),u[6]=r,u[7]=a):(r=u[6],a=u[7]),u[8]!==h?(i=(0,c.jsx)("button",{type:"button",onClick:h,children:"All"}),u[8]=h,u[9]=i):i=u[9],u[10]!==v?(l=(0,c.jsx)("button",{type:"button",onClick:v,children:"None"}),u[10]=v,u[11]=l):l=u[11],u[12]!==j?(s=(0,c.jsx)("ul",{className:"buttons",children:j}),u[12]=j,u[13]=s):s=u[13],u[14]!==i||u[15]!==l||u[16]!==s?(o=(0,c.jsxs)(c.Fragment,{children:[r,a,i,l,s]}),u[14]=i,u[15]=l,u[16]=s,u[17]=o):o=u[17],o};function N(e){return(0,c.jsx)(S,{locale:e},e[0])}O.displayName="Locale Filters";var E=function(e){var t,n,r,a=(0,f.c)(11),i=e.cuisine,l=(0,s.useRef)(null),o=w(),u=o.cuisineFilters[i[0]];a[0]!==o||a[1]!==u?(t=function(){var e=l.current;if(null==e?void 0:e.textContent){var t=e.getAttribute("data-cuisine");t&&o.updateCuisineFilters((0,g._)({},t,!u))}},a[0]=o,a[1]=u,a[2]=t):t=a[2];var d=t,h=i[0],v=i[0],p=u?"active":"",j=i[0];return a[3]!==v||a[4]!==p||a[5]!==d||a[6]!==j?(n=(0,c.jsx)("button",{ref:l,"data-cuisine":v,className:p,onClick:d,children:j}),a[3]=v,a[4]=p,a[5]=d,a[6]=j,a[7]=n):n=a[7],a[8]!==h||a[9]!==n?(r=(0,c.jsx)("li",{children:n},h),a[8]=h,a[9]=n,a[10]=r):r=a[10],r},A=function(){var e,t,n,r,a,i,l,s,o,u=(0,f.c)(18),d=w();u[0]!==d?(e=function(){var e=d.cuisineFilters;Object.keys(e).forEach(function(t){e[t]=!0}),d.updateCuisineFilters(e)},u[0]=d,u[1]=e):e=u[1];var h=e;u[2]!==d?(t=function(){var e=d.cuisineFilters;Object.keys(e).forEach(function(t){e[t]=!1}),d.updateCuisineFilters(e)},u[2]=d,u[3]=t):t=u[3];var v=t,p=d.cuisineFilters;u[4]!==p?(n=Object.entries(p).sort(x).map(_),u[4]=p,u[5]=n):n=u[5];var j=n;return u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)("h3",{children:"Cuisines"}),a=(0,c.jsx)("span",{children:"Select: "}),u[6]=r,u[7]=a):(r=u[6],a=u[7]),u[8]!==h?(i=(0,c.jsx)("button",{type:"button",onClick:h,children:"All"}),u[8]=h,u[9]=i):i=u[9],u[10]!==v?(l=(0,c.jsx)("button",{type:"button",onClick:v,children:"None"}),u[10]=v,u[11]=l):l=u[11],u[12]!==j?(s=(0,c.jsx)("ul",{className:"buttons",children:j}),u[12]=j,u[13]=s):s=u[13],u[14]!==i||u[15]!==l||u[16]!==s?(o=(0,c.jsxs)(c.Fragment,{children:[r,a,i,l,s]}),u[14]=i,u[15]=l,u[16]=s,u[17]=o):o=u[17],o};function _(e){return(0,c.jsx)(E,{cuisine:e},e[0])}A.displayName="Cuisine Filters";var L=function(e,t){var n=t.locales,r=void 0===n?{}:n,a=Object.keys(r).sort(k).map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=r[t],a=e.toLowerCase().replace(/ /g,"-");if(n)return(0,c.jsx)("li",{children:(0,c.jsxs)("a",{"data-locale":t,href:"/".concat(t,"/cuisine/").concat(a),children:[t.toUpperCase()," (",n,")"]})},t)});return(0,c.jsx)("ul",{children:a})},M=function(){var e,t,n,r,a,i,l,s,o,u,d,h=(0,f.c)(25),v=w(),j=v.data;h[0]!==j.cuisineBreakdown||h[1]!==v.cuisineFilters?(h[3]!==v.cuisineFilters?(t=function(e){return v.cuisineFilters[e]},h[3]=v.cuisineFilters,h[4]=t):t=h[4],h[5]!==j.cuisineBreakdown?(n=function(e){var t=j.cuisineBreakdown[e];return(0,c.jsxs)("li",{className:"first-level","data-cuisine":e,children:[(0,c.jsxs)("span",{children:[e," (Total: ",t.totalCount,")"]}),(0,c.jsx)("div",{className:"second-level",children:L(e,t)})]},e)},h[5]=j.cuisineBreakdown,h[6]=n):n=h[6],e=Object.keys(j.cuisineBreakdown).filter(t).sort().map(n),h[0]=j.cuisineBreakdown,h[1]=v.cuisineFilters,h[2]=e):e=h[2];var m=e;h[7]!==j.restaurantBreakdown||h[8]!==j.restaurantCount||h[9]!==v.localeFilters?(h[11]!==v.localeFilters?(a=function(e){return v.localeFilters[e]},h[11]=v.localeFilters,h[12]=a):a=h[12],h[13]!==j.restaurantBreakdown||h[14]!==j.restaurantCount?(i=function(e){var t=j.restaurantBreakdown[e],n=Object.keys(t).sort().map(function(n){var r=t[n].length;if(r<=0)return null;var a=t[n].sort(k).map(function(e){return(0,c.jsx)("li",{className:"third-level",children:(0,c.jsx)("a",{href:e.link,children:e.name})},"".concat(n,"-").concat(e.name))}),i=(p[n]||n).replace(/ /g,"-").replace(/'/g,"").toLowerCase();return(0,c.jsxs)("li",{className:"neighborhood-level",children:[(0,c.jsx)("a",{href:"/".concat(e,"/neighborhood/").concat(i),children:n.toUpperCase()})," (",r,")",(0,c.jsx)("ul",{children:a})]},"".concat(e,"-").concat(i))});return(0,c.jsxs)("li",{className:"first-level","data-locale":e,children:[(0,c.jsx)("a",{href:"/locale/".concat(e),children:e.toUpperCase()})," (Total: ",j.restaurantCount[e],")",(0,c.jsx)("ul",{children:n})]},e)},h[13]=j.restaurantBreakdown,h[14]=j.restaurantCount,h[15]=i):i=h[15],r=Object.keys(j.restaurantBreakdown).filter(a).map(i),h[7]=j.restaurantBreakdown,h[8]=j.restaurantCount,h[9]=v.localeFilters,h[10]=r):r=h[10];var y=r;return h[16]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)("div",{className:"title",children:"Cuisine Breakdown"}),h[16]=l):l=h[16],h[17]!==m?(s=(0,c.jsxs)("section",{id:"cuisine-breakdown",children:[l,(0,c.jsx)("div",{className:"synopsis",children:(0,c.jsx)("ul",{children:m})})]}),h[17]=m,h[18]=s):s=h[18],h[19]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)("div",{className:"title",children:"Restaurant Breakdown"}),h[19]=o):o=h[19],h[20]!==y?(u=(0,c.jsxs)("section",{id:"restaurant-breakdown",children:[o,(0,c.jsx)("div",{className:"synopsis",children:(0,c.jsx)("ul",{children:y})})]}),h[20]=y,h[21]=u):u=h[21],h[22]!==s||h[23]!==u?(d=(0,c.jsxs)(c.Fragment,{children:[s,u]}),h[22]=s,h[23]=u,h[24]=d):d=h[24],d};function I(){return(I=(0,i._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,fetch("/index.json")];case 1:return[2,e.sent().json()]}})})).apply(this,arguments)}(function(){return I.apply(this,arguments)})().then(function(e){var t,n={},r={};null===(t=e.index)||void 0===t||t.forEach(function(e){n[e.meta.locale]=!0,e.meta.cuisines.forEach(function(e){r[e]=!0})});var a=document.querySelector("#content .stats");a?(0,o.createRoot)(a).render((0,c.jsx)(s.StrictMode,{children:(0,c.jsxs)(F,{response:y(e),children:[(0,c.jsxs)("div",{className:"filters",children:[(0,c.jsx)(O,{}),(0,c.jsx)(A,{})]}),(0,c.jsx)("div",{className:"results",children:(0,c.jsx)(M,{})})]})})):console.error("Could not render root because query selector failed")})}}]);
//# sourceMappingURL=365.gs.js.map